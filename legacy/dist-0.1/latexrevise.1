.rn '' }`
''' $RCSfile$$Revision$$Date$
'''
''' $Log$
'''
.de Sh
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp
.if t .sp .5v
.if n .sp
..
.de Ip
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.de Vb
.ft CW
.nf
.ne \\$1
..
.de Ve
.ft R

.fi
..
'''
'''
'''     Set up \*(-- to give an unbreakable dash;
'''     string Tr holds user defined translation string.
'''     Bell System Logo is used as a dummy character.
'''
.tr \(*W-|\(bv\*(Tr
.ie n \{\
.ds -- \(*W-
.ds PI pi
.if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\" diablo 12 pitch
.ds L" ""
.ds R" ""
'''   \*(M", \*(S", \*(N" and \*(T" are the equivalent of
'''   \*(L" and \*(R", except that they are used on ".xx" lines,
'''   such as .IP and .SH, which do another additional levels of
'''   double-quote interpretation
.ds M" """
.ds S" """
.ds N" """""
.ds T" """""
.ds L' '
.ds R' '
.ds M' '
.ds S' '
.ds N' '
.ds T' '
'br\}
.el\{\
.ds -- \(em\|
.tr \*(Tr
.ds L" ``
.ds R" ''
.ds M" ``
.ds S" ''
.ds N" ``
.ds T" ''
.ds L' `
.ds R' '
.ds M' `
.ds S' '
.ds N' `
.ds T' '
.ds PI \(*p
'br\}
.\"	If the F register is turned on, we'll generate
.\"	index entries out stderr for the following things:
.\"		TH	Title 
.\"		SH	Header
.\"		Sh	Subsection 
.\"		Ip	Item
.\"		X<>	Xref  (embedded
.\"	Of course, you have to process the output yourself
.\"	in some meaninful fashion.
.if \nF \{
.de IX
.tm Index:\\$1\t\\n%\t"\\$2"
..
.nr % 0
.rr F
.\}
.TH LATEXREVISE 1 "perl 5.005, patch 03" "19/Jul/2004" " "
.UC
.if n .hy 0
.if n .na
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.de CQ          \" put $1 in typewriter font
.ft CW
'if n "\c
'if t \\&\\$1\c
'if n \\&\\$1\c
'if n \&"
\\&\\$2 \\$3 \\$4 \\$5 \\$6 \\$7
'.ft R
..
.\" @(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2
.	\" AM - accent mark definitions
.bd B 3
.	\" fudge factors for nroff and troff
.if n \{\
.	ds #H 0
.	ds #V .8m
.	ds #F .3m
.	ds #[ \f1
.	ds #] \fP
.\}
.if t \{\
.	ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.	ds #V .6m
.	ds #F 0
.	ds #[ \&
.	ds #] \&
.\}
.	\" simple accents for nroff and troff
.if n \{\
.	ds ' \&
.	ds ` \&
.	ds ^ \&
.	ds , \&
.	ds ~ ~
.	ds ? ?
.	ds ! !
.	ds /
.	ds q
.\}
.if t \{\
.	ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.	ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.	ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.	ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.	ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.	ds ? \s-2c\h'-\w'c'u*7/10'\u\h'\*(#H'\zi\d\s+2\h'\w'c'u*8/10'
.	ds ! \s-2\(or\s+2\h'-\w'\(or'u'\v'-.8m'.\v'.8m'
.	ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.	ds q o\h'-\w'o'u*8/10'\s-4\v'.4m'\z\(*i\v'-.4m'\s+4\h'\w'o'u*8/10'
.\}
.	\" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds v \\k:\h'-(\\n(.wu*9/10-\*(#H)'\v'-\*(#V'\*(#[\s-4v\s0\v'\*(#V'\h'|\\n:u'\*(#]
.ds _ \\k:\h'-(\\n(.wu*9/10-\*(#H+(\*(#F*2/3))'\v'-.4m'\z\(hy\v'.4m'\h'|\\n:u'
.ds . \\k:\h'-(\\n(.wu*8/10)'\v'\*(#V*4/10'\z.\v'-\*(#V*4/10'\h'|\\n:u'
.ds 3 \*(#[\v'.2m'\s-2\&3\s0\v'-.2m'\*(#]
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.ds oe o\h'-(\w'o'u*4/10)'e
.ds Oe O\h'-(\w'O'u*4/10)'E
.	\" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.	\" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.	ds : e
.	ds 8 ss
.	ds v \h'-1'\o'\(aa\(ga'
.	ds _ \h'-1'^
.	ds . \h'-1'.
.	ds 3 3
.	ds o a
.	ds d- d\h'-1'\(ga
.	ds D- D\h'-1'\(hy
.	ds th \o'bp'
.	ds Th \o'LP'
.	ds ae ae
.	ds Ae AE
.	ds oe oe
.	ds Oe OE
.\}
.rm #[ #] #H #V #F C
.SH "NAME"
latexrevise \- selectively remove markup and text from latexdiff output
.SH "SYNOPSIS"
\fBlatexrevise\fR [ \fBOPTIONS\fR ] [ \fIdiff.tex\fR ] > \fIrevised.tex\fR
.SH "DESCRIPTION"
\fIlatexrevise\fR reads a file \f(CWdiff.tex\fR (output of \fIlatexdiff\fR), and remove the markup commands. 
If no filename is given the input is read from standard input. The command can be used
in \fIACCEPT\fR, \fIDECLINE\fR, or \fISIMPLIFY\fR mode, or can be used to remove user-defined
latex commands from the input (see \fB\-c\fR, \fB\-e\fR, \fB\-m\fR, and \fB\-n\fR below). 
In \fIACCEPT\fR mode, all appended text fragments  (or preamble lines)
are kept, and all discarded text fragments (or preamble lines) are
deleted.  
In \fIDECLINE\fR mode, all discarded text fragments are kept, and all appended 
text fragments are deleted.  
If you wish to keep some changes, edit the diff.tex file in
advance, and manually remove those tokens  which would otherwise be
deleted.  Note that \fIlatexrevise\fR only pays attention to the \f(CW\eDIFaddbegin\fR,
\f(CW\eDIFaddend\fR, \f(CW\eDIFdelbegin\fR, and \f(CW\eDIFdelend\fR tokens and corresponding FL
varieties.  All \f(CW\eDIFadd\fR and \f(CW\eDIFdel\fR commands (but not their contents) are 
simply deleted.   The commands added by latexdiff to the preamble are also
removed.
In \fISIMPLIFY\fR mode, \f(CW\eDIFaddbegin, \eDIFaddend, \eDIFdelbegin, \eDIFdelend\fR
tokens and their corresponding \f(CWFL\fR varieties are kept but all other markup (e.g. \f(CWDIFadd\fR and <\eDIFdel>) is removed.  The result
will not in general be valid latex-code but it will be easier to read and edit in 
preparation for a subsequent run in \fIACCEPT\fR or \fIDECLINE\fR mode.  
In \fISIMPLIFY\fR mode the preamble is left unmodified.
.SH "OPTIONS"
.Ip "\fB\-a\fR or \fB--accept\fR" 4
Run in \fI\s-1ACCEPT\s0\fR mode (delete all blocks marked by \f(CW\eDIFdelbegin\fR and \f(CW\eDIFdelend\fR).
.Ip "\fB\-d\fR or \fB--decline\fR" 4
Run in \fI\s-1DECLINE\s0\fR mode (delete all blocks marked by \f(CW\eDIFaddbegin\fR
and \f(CW\eDIFaddend\fR).
.Ip "\fB\-s\fR or \fB--simplify\fR" 4
Run in \fI\s-1SIMPLIFY\s0\fR mode (Keep all \f(CW\eDIFaddbegin\fR, \f(CW\eDIFaddend\fR, 
\f(CW\eDIFdelbegin\fR, \f(CW\eDIFdelend\fR tokens, but remove all other latexdiff
markup from body).  
.PP
Note that the three mode options are mutually exclusive.  If no mode option is given,
\fIlatexrevise\fR simply removes user annotations and markup according to the following four
options.
.Ip "\fB\-c cmd\fR or \fB--comment=cmd\fR" 4
Remove \f(CW\ecmd{...}\fR sequences.  \f(CWcmd\fR is supposed to mark some explicit 
anotations which should be removed from the file before 
release.
.Ip "\fB\-e envir\fR or \fB--comment-environment=envir\fR " 4
Remove explicit annotation environments from the text, i.e. remove
.Sp
.Vb 3
\&            \ebegin{envir}
\&            ...
\&            \eend{envir}
.Ve
blocks.
.Ip "\fB\-m cmd\fR or \fB--markup=cmd\fR" 4
Remove the markup command \f(CW\ecmd\fR but leave its argument, i.e.
turn \f(CW\ecmd{abc}\fR into \f(CWabc\fR.  
.Ip "\fB\-n envir\fR or \fB--markup-environment=envir\fR" 4
Similarly, remove \f(CW\ebegin{envir}\fR and \f(CW\eend{envir}\fR commands but 
leave content of the environment in the text.
                  
.Ip "\fB\-V\fR or \fB--verbose\fR" 4
Verbose output
.Ip "\fB\-q\fR or \fB--no-warnings\fR" 4
Do not warn users about \f(CW\eDIDadd{..}\fR or \f(CW\eDIFdel{..}\fR statements
which should have been removed already.
.SH "BUGS"
The current version is a beta version which has not yet been
extensively tested, but worked fine locally.  Please send bug reports
to \fItilmann@esc.cam.ac.uk\fR.  Include the serial number of \fIlatexrevise\fR
(from comments at the top of the source).  If you come across latexdiff
output which is not processed correctly by \fIlatexrevise\fR please include the
problem file as well as the old and new files on which it is based,
ideally edited to only contain the offending passage as long as that still
reproduces the problem.
.SH "SEE ALSO"
the \fIlatexdiff\fR manpage
.SH "PORTABILITY"
\fIlatexrevise\fR does not make use of external commands and thus should run
on any platform  supporting PERL v5 or higher. 
.SH "AUTHOR"
Copyright (C) 2004 Frederik Tilmann
.PP
This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License Version 2

.rn }` ''
.IX Title "LATEXREVISE 1"
.IX Name "latexrevise - selectively remove markup and text from latexdiff output"

.IX Header "NAME"

.IX Header "SYNOPSIS"

.IX Header "DESCRIPTION"

.IX Header "OPTIONS"

.IX Item "\fB\-a\fR or \fB--accept\fR"

.IX Item "\fB\-d\fR or \fB--decline\fR"

.IX Item "\fB\-s\fR or \fB--simplify\fR"

.IX Item "\fB\-c cmd\fR or \fB--comment=cmd\fR"

.IX Item "\fB\-e envir\fR or \fB--comment-environment=envir\fR "

.IX Item "\fB\-m cmd\fR or \fB--markup=cmd\fR"

.IX Item "\fB\-n envir\fR or \fB--markup-environment=envir\fR"

.IX Item "\fB\-V\fR or \fB--verbose\fR"

.IX Item "\fB\-q\fR or \fB--no-warnings\fR"

.IX Header "BUGS"

.IX Header "SEE ALSO"

.IX Header "PORTABILITY"

.IX Header "AUTHOR"

